(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{243:function(t,a,r){"use strict";r.r(a);var e=r(4),_=Object(e.a)({},function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"做架构要考虑什么？"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#做架构要考虑什么？","aria-hidden":"true"}},[t._v("#")]),t._v(" 做架构要考虑什么？")]),t._v(" "),r("p",[t._v("一切为了用户体验！")]),t._v(" "),r("ul",[r("li",[t._v("前端页面性能足够好，流畅不卡顿；")]),t._v(" "),r("li",[t._v("后端数据支撑性能足够好，快速返回响应；")]),t._v(" "),r("li",[t._v("完善的项目管理流程，快速迭代更新；")]),t._v(" "),r("li",[t._v("be simple，没有银弹")])]),t._v(" "),r("h2",{attrs:{id:"前端"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#前端","aria-hidden":"true"}},[t._v("#")]),t._v(" 前端")]),t._v(" "),r("h3",{attrs:{id:"业务层面"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#业务层面","aria-hidden":"true"}},[t._v("#")]),t._v(" 业务层面")]),t._v(" "),r("ul",[r("li",[t._v("完成需求并且通过测试")]),t._v(" "),r("li",[t._v("代码质量高，高质量的组件设计，SOLID 原则；")]),t._v(" "),r("li",[t._v("BUG 少，性能好，前端兼容性好；")]),t._v(" "),r("li",[t._v("减少打包体积，懒加载、预加载策略")]),t._v(" "),r("li",[t._v("合理的缓存策略，静态资源 CDN 缓存，OSS 存储")]),t._v(" "),r("li",[t._v("完善的文档，Storybook 等")])]),t._v(" "),r("h4",{attrs:{id:"技术选型"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#技术选型","aria-hidden":"true"}},[t._v("#")]),t._v(" 技术选型")]),t._v(" "),r("p",[t._v("多页 VS 单页应用？")]),t._v(" "),r("p",[t._v("服务端渲染 VS 客户端渲染？")]),t._v(" "),r("p",[t._v("UI 组件库？")]),t._v(" "),r("p",[t._v("考虑的点：运行环境兼容性，移动端 还是 PC 端，2B 还是 2C，SEO 需求大不大，可维护性怎么样，团队水平怎么样。")]),t._v(" "),r("h3",{attrs:{id:"阶段二：基建"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#阶段二：基建","aria-hidden":"true"}},[t._v("#")]),t._v(" 阶段二：基建")]),t._v(" "),r("p",[t._v("业务是无限增长的，但是人不是。")]),t._v(" "),r("ul",[r("li",[t._v("版本控制，GitFlow")]),t._v(" "),r("li")]),t._v(" "),r("h2",{attrs:{id:"中间层-后端"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#中间层-后端","aria-hidden":"true"}},[t._v("#")]),t._v(" 中间层 & 后端")]),t._v(" "),r("h3",{attrs:{id:"业务相关"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#业务相关","aria-hidden":"true"}},[t._v("#")]),t._v(" 业务相关")]),t._v(" "),r("ul",[r("li",[t._v("鉴权")]),t._v(" "),r("li",[t._v("安全性")]),t._v(" "),r("li",[t._v("RBAC 权限设置")]),t._v(" "),r("li",[t._v("OAuth 2")])]),t._v(" "),r("h3",{attrs:{id:"负载均衡"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#负载均衡","aria-hidden":"true"}},[t._v("#")]),t._v(" 负载均衡")]),t._v(" "),r("p",[t._v("高并发场景，防止单点服务器过载导致宕机。")]),t._v(" "),r("p",[r("img",{attrs:{src:"http://qn-noter.yunxi.site/imagehost/x407t.png",alt:"image-20200323171043038"}})]),t._v(" "),r("h4",{attrs:{id:"dns-解析"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#dns-解析","aria-hidden":"true"}},[t._v("#")]),t._v(" DNS 解析")]),t._v(" "),r("p",[t._v("将同一个域名解析到不同的 IP。")]),t._v(" "),r("ul",[r("li",[t._v("view 功能，分析地理位置分配节点；")]),t._v(" "),r("li",[t._v("节点负载能力，健康度；")]),t._v(" "),r("li",[t._v("有点是易配置，不需要专门的负载均衡服务器；缺点是不够灵活。")])]),t._v(" "),r("p",[r("img",{attrs:{src:"http://qn-noter.yunxi.site/imagehost/3qmpg.png-style1",alt:"image-20200323171312353"}})]),t._v(" "),r("h4",{attrs:{id:"nginx-反向代理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#nginx-反向代理","aria-hidden":"true"}},[t._v("#")]),t._v(" Nginx 反向代理")]),t._v(" "),r("p",[t._v("一般来说会有一台负载均衡服务器，专门将大量请求分发到其他服务器上。")]),t._v(" "),r("p",[r("img",{attrs:{src:"http://qn-noter.yunxi.site/imagehost/ro4na.png-style1",alt:"image-20200323171711160"}})]),t._v(" "),r("p",[t._v("upstream")]),t._v(" "),r("ul",[r("li",[t._v("灵活，配置不同策略，round robin 轮询、加权轮训、源 IP 哈希，URL 哈希、随机法（平均）；")]),t._v(" "),r("li",[t._v("插件强大，健康度检测；nginx_upstream_check_module "),r("strong",[r("a",{attrs:{href:"https://github.com/alibaba/tengine",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里 tengine 自带"),r("OutboundLink")],1)])])]),t._v(" "),r("h4",{attrs:{id:"kubernetes"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes","aria-hidden":"true"}},[t._v("#")]),t._v(" Kubernetes")]),t._v(" "),r("p",[r("strong",[t._v("服务发现和负载均衡")])]),t._v(" "),r("p",[r("strong",[t._v("自动部署和回滚 CI CD")])]),t._v(" "),r("p",[r("strong",[t._v("自动二进制打包")])]),t._v(" "),r("p",[r("strong",[t._v("自我修复")])]),t._v(" "),r("h3",{attrs:{id:"redis-缓存"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#redis-缓存","aria-hidden":"true"}},[t._v("#")]),t._v(" Redis 缓存")]),t._v(" "),r("p",[t._v("我理解的请求的本质，就是争夺"),r("strong",[t._v("数据库")]),t._v("写表的操作权利。")]),t._v(" "),r("p",[t._v("在高并发场景下，我们可以利用 Redis 加缓存减轻 db 的压力，提升用户读写的速度。因为缓存是在内存中的，读写会非常快。")]),t._v(" "),r("p",[t._v("MySQL 扛不住，就去找 Redis 嘛，写一个定时脚本，在秒杀还"),r("strong",[t._v("未开始")]),t._v("之前，就把当前口罩的库存数量写入 Redis，让 Node 服务的请求从 Redis 这里拿数据进行处理，然后异步的往 kafka 消息队列里面写入抢到口罩用户的订单信息。")]),t._v(" "),r("p",[t._v("当然，Redis 也是要用事务机制来保证原子操作，进而保证数据隔离和一致性。")]),t._v(" "),r("p",[t._v("那如果单台 Redis 扛不住，我们可以对 Redis 进行集群，主从同步这一系列的操作，然后再搞点"),r("strong",[t._v("哨兵")]),t._v("，"),r("strong",[t._v("持久化")]),t._v("也搞上。")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/29665317",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redis 常见的应用场景解析"),r("OutboundLink")],1)]),t._v(" "),r("h3",{attrs:{id:"kafka-消息队列"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#kafka-消息队列","aria-hidden":"true"}},[t._v("#")]),t._v(" Kafka 消息队列")]),t._v(" "),r("p",[t._v("kafka 消息队列就是基于"),r("strong",[t._v("生产者-消设计模式")]),t._v("滴，按具体场景与规则，针对上层请求让生产者往队列的末尾添加数据，让多个消费者从队列里面依次读取数据然后自行处理。")]),t._v(" "),r("p",[t._v("结合到我们的高并发场景就是，对订单进行分组存储管理，然后让多个消费者来进行消费，也就是把订单信息写入 db。")]),t._v(" "),r("h3",{attrs:{id:"docker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker","aria-hidden":"true"}},[t._v("#")]),t._v(" Docker")]),t._v(" "),r("p",[t._v("我们可以用 "),r("strong",[t._v("docker")]),t._v(" 来复用配置好的开发环境，这样就很轻量并且很方便管理。")]),t._v(" "),r("h3",{attrs:{id:"数据库"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#数据库","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据库")]),t._v(" "),r("p",[r("img",{attrs:{src:"http://qn-noter.yunxi.site/imagehost/mchnc.png-style1",alt:"image-20200323204115088"}})]),t._v(" "),r("h2",{attrs:{id:"项目管理流程"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#项目管理流程","aria-hidden":"true"}},[t._v("#")]),t._v(" 项目管理流程")]),t._v(" "),r("ul",[r("li",[t._v("良好的 API 设计？\n"),r("ul",[r("li",[t._v("API 版本设计、公共接口、权限接口")])])]),t._v(" "),r("li",[t._v("文档管理，storybook")])]),t._v(" "),r("h2",{attrs:{id:"注意点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#注意点","aria-hidden":"true"}},[t._v("#")]),t._v(" 注意点")]),t._v(" "),r("p",[t._v("架构匹配需求，越简单越好")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("避免过度工程化，避免为了高大上而搞得很复杂")])]),t._v(" "),r("li",[r("p",[t._v("过早优化")])])])])},[],!1,null,null,null);a.default=_.exports}}]);