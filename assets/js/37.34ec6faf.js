(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{234:function(t,a,s){"use strict";s.r(a);var e=s(4),n=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"react-è¿›é˜¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-è¿›é˜¶","aria-hidden":"true"}},[t._v("#")]),t._v(" React è¿›é˜¶")]),t._v(" "),s("h2",{attrs:{id:"ç›®å½•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç›®å½•","aria-hidden":"true"}},[t._v("#")]),t._v(" ç›®å½•")]),t._v(" "),s("p",[s("strong",[t._v("ç°è±¡")])]),t._v(" "),s("ol",[s("li",[t._v("ä¸å¯å˜å€¼")]),t._v(" "),s("li",[t._v("å¯èƒ½å¼‚æ­¥")]),t._v(" "),s("li",[t._v("å¯èƒ½ä¼šè¢«åˆå¹¶")])]),t._v(" "),s("p",[s("strong",[t._v("åŸç†")])]),t._v(" "),s("ul",[s("li",[t._v("å‡½æ•°å¼ç¼–ç¨‹")]),t._v(" "),s("li",[t._v("VDOM å’Œ diff")]),t._v(" "),s("li",[t._v("JSX çš„æœ¬è´¨")]),t._v(" "),s("li",[t._v("åˆæˆäº‹ä»¶")]),t._v(" "),s("li",[t._v("setState batchUpdate")]),t._v(" "),s("li",[t._v("ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹")]),t._v(" "),s("li",[t._v("å‰ç«¯è·¯ç”±")])]),t._v(" "),s("h2",{attrs:{id:"ä¸èƒ½ç›´æ¥ä¿®æ”¹-stateï¼Œè¦ç”¨ä¸å¯å˜å€¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸èƒ½ç›´æ¥ä¿®æ”¹-stateï¼Œè¦ç”¨ä¸å¯å˜å€¼","aria-hidden":"true"}},[t._v("#")]),t._v(" ä¸èƒ½ç›´æ¥ä¿®æ”¹ stateï¼Œè¦ç”¨ä¸å¯å˜å€¼")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é”™è¯¯")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ­£ç¡®")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"setstate-å¯èƒ½æ˜¯å¼‚æ­¥ï¼Œä¹Ÿå¯èƒ½æ˜¯åŒæ­¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setstate-å¯èƒ½æ˜¯å¼‚æ­¥ï¼Œä¹Ÿå¯èƒ½æ˜¯åŒæ­¥","aria-hidden":"true"}},[t._v("#")]),t._v(" setState å¯èƒ½æ˜¯å¼‚æ­¥ï¼Œä¹Ÿå¯èƒ½æ˜¯åŒæ­¥")]),t._v(" "),s("p",[t._v("ç›´æ¥ä½¿ç”¨æ˜¯å¼‚æ­¥çš„")]),t._v(" "),s("p",[t._v("setTimeout ä¸­ï¼ŒsetState æ˜¯åŒæ­¥çš„")]),t._v(" "),s("p",[t._v("è‡ªå·±å®šä¹‰çš„ DOM äº‹ä»¶ï¼ŒsetState æ˜¯åŒæ­¥çš„")]),t._v(" "),s("p",[t._v("##åˆå¹¶")]),t._v(" "),s("h3",{attrs:{id:"ä¼ å…¥å¯¹è±¡ï¼Œä¼šè¢«åˆå¹¶ï¼Œåªæ‰§è¡Œä¸€æ¬¡-1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¼ å…¥å¯¹è±¡ï¼Œä¼šè¢«åˆå¹¶ï¼Œåªæ‰§è¡Œä¸€æ¬¡-1","aria-hidden":"true"}},[t._v("#")]),t._v(" ä¼ å…¥å¯¹è±¡ï¼Œä¼šè¢«åˆå¹¶ï¼Œåªæ‰§è¡Œä¸€æ¬¡ +1")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœ€ç»ˆåªåŠ 1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç±»æ¯”ï¼šObject.assign")]),t._v("\n")])])]),s("h3",{attrs:{id:"ä¼ å…¥å‡½æ•°ï¼Œä¸ä¼šè¢«åˆå¹¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¼ å…¥å‡½æ•°ï¼Œä¸ä¼šè¢«åˆå¹¶","aria-hidden":"true"}},[t._v("#")]),t._v(" ä¼ å…¥å‡½æ•°ï¼Œä¸ä¼šè¢«åˆå¹¶")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevState")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" prevState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevState")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" prevState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevState")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" prevState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‡½æ•°æ— æ³•åˆå¹¶")]),t._v("\n")])])]),s("h1",{attrs:{id:"åŸç†æ¢³ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸç†æ¢³ç†","aria-hidden":"true"}},[t._v("#")]),t._v(" åŸç†æ¢³ç†")]),t._v(" "),s("p",[t._v("å‡½æ•°å¼ç¼–ç¨‹")]),t._v(" "),s("ul",[s("li",[t._v("ä¸€ç§ç¼–ç¨‹èŒƒå¼")]),t._v(" "),s("li",[t._v("çº¯å‡½æ•°")]),t._v(" "),s("li",[t._v("ä¸å¯å˜å€¼")])]),t._v(" "),s("h2",{attrs:{id:"vdom-å’Œ-diff-æ˜¯-react-çš„åŸºçŸ³"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vdom-å’Œ-diff-æ˜¯-react-çš„åŸºçŸ³","aria-hidden":"true"}},[t._v("#")]),t._v(" VDOM å’Œ diff æ˜¯ React çš„åŸºçŸ³")]),t._v(" "),s("h3",{attrs:{id:"vdom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vdom","aria-hidden":"true"}},[t._v("#")]),t._v(" VDOM")]),t._v(" "),s("p",[t._v("h å‡½æ•°")]),t._v(" "),s("p",[t._v("vnode æ•°æ®ç»“æ„ï¼Œæ ‘")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/0082zybply1gc8zfcbh0nj30am0do0tw.jpg",alt:"image-20200225214648201"}})]),t._v(" "),s("p",[t._v("patch å‡½æ•°")]),t._v(" "),s("h3",{attrs:{id:"diff-ç®—æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#diff-ç®—æ³•","aria-hidden":"true"}},[t._v("#")]),t._v(" diff ç®—æ³•")]),t._v(" "),s("ul",[s("li",[t._v("åŒçº§æ¯”è¾ƒ")]),t._v(" "),s("li",[t._v("tag ä¸åŒï¼Œåˆ™ç›´æ¥åˆ æ‰é‡å»ºï¼Œä¸å†æ·±åº¦æ¯”è¾ƒ")]),t._v(" "),s("li",[t._v("tag å’Œ keyï¼Œä¸¤è€…éƒ½ç›¸åŒï¼Œåˆ™è®¤ä¸ºæ˜¯ç›¸åŒèŠ‚ç‚¹ï¼Œä¸å†æ·±åº¦æ¯”è¾ƒ")])]),t._v(" "),s("p",[t._v("O(n^3) æ”¹è¿›ä¸º O(n)")]),t._v(" "),s("h3",{attrs:{id:"jsx-çš„æœ¬è´¨ï¼Ÿ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jsx-çš„æœ¬è´¨ï¼Ÿ","aria-hidden":"true"}},[t._v("#")]),t._v(" JSX çš„æœ¬è´¨ï¼Ÿ")]),t._v(" "),s("p",[t._v("JSX ä¸æ˜¯ JSã€‚")]),t._v(" "),s("ul",[s("li",[t._v("ç¼–è¯‘åæˆä¸ºä¸€å † "),s("code",[t._v("React.createElement()")]),t._v(" ï¼›")]),t._v(" "),s("li",[s("code",[t._v("React.createElement()")]),t._v(" æ‰§è¡Œè¿”å›çš„æ˜¯ä¸€ä¸ª vnodeï¼Œèƒ½é€šè¿‡åç»­çš„ patch æ¥æ¸²æŸ“ï¼›")]),t._v(" "),s("li",[t._v("ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯èƒ½æ˜¯ç»„ä»¶ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸ª HTML æ ‡ç­¾ï¼›")]),t._v(" "),s("li",[t._v("ç»„ä»¶åé¦–å­—æ¯å¿…é¡»å¤§å†™ï¼Œå°±æ˜¯ä¸ºäº†åŒºåˆ†ç»„ä»¶å’Œ tagã€‚")])]),t._v(" "),s("h2",{attrs:{id:"åˆæˆäº‹ä»¶æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åˆæˆäº‹ä»¶æœºåˆ¶","aria-hidden":"true"}},[t._v("#")]),t._v(" åˆæˆäº‹ä»¶æœºåˆ¶")]),t._v(" "),s("ul",[s("li",[t._v("event æ˜¯ SyntheticEventï¼Œæ¨¡æ‹Ÿå‡º DOM äº‹ä»¶æ‰€æœ‰èƒ½åŠ›")]),t._v(" "),s("li",[t._v("event.nativeEvent æ˜¯åŸç”Ÿå¯¹è±¡äº‹ä»¶")]),t._v(" "),s("li",[t._v("æ‰€æœ‰çš„äº‹ä»¶ï¼Œéƒ½è¢«æŒ‚è½½åˆ° document ä¸Š")]),t._v(" "),s("li",[t._v("å’Œ DOM äº‹ä»¶ä¸ä¸€æ ·")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/0082zybply1gc90bxjx1dj30q00bjtbg.jpg",alt:"image-20200225221807193"}})]),t._v(" "),s("p",[t._v("React é€šè¿‡è¿™ç§åˆæˆäº‹ä»¶æœºåˆ¶ï¼Œæ¨¡æ‹Ÿäº†æ¯ä¸€ä¸ªåŸç”Ÿ event çš„è¡Œä¸ºã€‚ç›¸å½“äºåœ¨åŸç”Ÿ event ä¸ŠåŒ…è£…äº†ä¸€å±‚ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ä¸ºä»€ä¹ˆéœ€è¦åˆæˆäº‹ä»¶æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆéœ€è¦åˆæˆäº‹ä»¶æœºåˆ¶","aria-hidden":"true"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆéœ€è¦åˆæˆäº‹ä»¶æœºåˆ¶")]),t._v(" "),s("ul",[s("li",[t._v("æ›´å¥½çš„å…¼å®¹æ€§å’Œè·¨å¹³å°")]),t._v(" "),s("li",[t._v("æŒ‚è½½åˆ° document ä¸Šï¼Œ"),s("strong",[t._v("å‡å°‘å†…å­˜æ¶ˆè€—")]),t._v("ï¼Œé¿å…é¢‘ç¹è§£ç»‘ ï¼ˆäº‹ä»¶å§”æ‰˜ï¼Ÿï¼‰\n"),s("ul",[s("li",[t._v("æ¯”å¦‚ "),s("code",[t._v("<a onClick={fn} />")]),t._v("ï¼Œå…¶å®æ²¡æœ‰ç›´æ¥åœ¨ a ä¸ŠæŒ‚äº‹ä»¶ï¼Œè€Œæ˜¯æŒ‚è½½ document ä¸Šï¼Œè¿™æ ·å½“ç»„ä»¶é”€æ¯çš„æ—¶å€™ä¹Ÿä¸ç”¨å»è§£ç»‘")])])]),t._v(" "),s("li",[t._v("æ–¹ä¾¿äº‹ä»¶ç»Ÿä¸€ç®¡ç†ï¼ˆå¦‚äº‹ç‰©æœºåˆ¶ï¼‰")])]),t._v(" "),s("h2",{attrs:{id:"setstate-å’Œ-batchupdate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setstate-å’Œ-batchupdate","aria-hidden":"true"}},[t._v("#")]),t._v(" setState å’Œ batchUpdate")]),t._v(" "),s("p",[s("strong",[t._v("å›é¡¾ç°è±¡ï¼š")])]),t._v(" "),s("ul",[s("li",[t._v("setState æœ‰æ—¶"),s("strong",[t._v("å¼‚æ­¥")]),t._v("ï¼ˆæ™®é€šä½¿ç”¨ï¼‰ï¼Œæœ‰æ—¶"),s("strong",[t._v("åŒæ­¥")]),t._v("ï¼ˆsetTimeoutï¼ŒDOM äº‹ä»¶ï¼‰")]),t._v(" "),s("li",[t._v("æœ‰æ—¶åˆå¹¶ï¼ˆå¯¹è±¡å½¢å¼ï¼‰ï¼Œæœ‰æ—¶ä¸åˆå¹¶ï¼ˆå‡½æ•°å½¢å¼ï¼‰")]),t._v(" "),s("li",[t._v("åè€…å¥½ç†è§£ï¼ˆç±»ä¼¼ Object.assignï¼‰ï¼Œä¸»è¦ç†è§£ setState")])]),t._v(" "),s("p",[s("strong",[t._v("æ ¸å¿ƒè¦ç‚¹ï¼š")])]),t._v(" "),s("ul",[s("li",[t._v("setState çš„ä¸»è¦æµç¨‹")]),t._v(" "),s("li",[t._v("batchUpdate æœºåˆ¶")]),t._v(" "),s("li",[t._v("transaction ï¼ˆäº‹åŠ¡ï¼‰æœºåˆ¶")])]),t._v(" "),s("h3",{attrs:{id:"setstate-çš„æµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setstate-çš„æµç¨‹","aria-hidden":"true"}},[t._v("#")]),t._v(" setState çš„æµç¨‹")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/0082zybply1gc9gqugd88j30ht0cemz9.jpg",alt:"image-20200226074600085"}})]),t._v(" "),s("p",[t._v("ä¸Šé¢çš„ç»“æœæœ€ç»ˆæ˜¯ 1ï¼Œåœ¨"),s("code",[t._v("setState")]),t._v("çš„æ—¶å€™ react å†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ª"),s("code",[t._v("updateQueue")]),t._v("ï¼Œé€šè¿‡"),s("code",[t._v("firstUpdate")]),t._v("ã€"),s("code",[t._v("lastUpdate")]),t._v("ã€"),s("code",[t._v("lastUpdate.next")]),t._v("å»ç»´æŠ¤ä¸€ä¸ªæ›´æ–°çš„é˜Ÿåˆ—ï¼Œåœ¨æœ€ç»ˆçš„"),s("code",[t._v("performWork")]),t._v("ä¸­ï¼Œç›¸åŒçš„ key ä¼šè¢«è¦†ç›–ï¼Œåªä¼šå¯¹æœ€åä¸€æ¬¡çš„"),s("code",[t._v("setState")]),t._v("è¿›è¡Œæ›´æ–°ã€‚")]),t._v(" "),s("h3",{attrs:{id:"batchupdate-æœºåˆ¶ä»¥åŠ-isbatchingupdates"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#batchupdate-æœºåˆ¶ä»¥åŠ-isbatchingupdates","aria-hidden":"true"}},[t._v("#")]),t._v(" batchUpdate æœºåˆ¶ä»¥åŠ isBatchingUpdates")]),t._v(" "),s("p",[t._v("ä¸¾ä¸ª ğŸŒ°ï¼Œæ”¾åœ¨ setTimeout ä¸­")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/0082zybply1gc9gtpyrobj30sp0d20zu.jpg",alt:"image-20200226074848656"}})]),t._v(" "),s("p",[t._v("çœ‹å³è¾¹ï¼Œå¼€å§‹å¤„äº "),s("code",[t._v("batchUpdate")]),t._v(" ä¸­ï¼Œ"),s("code",[t._v("isBatchingUpdates = true")]),t._v("ï¼Œæ¥ç€å¼€å§‹æ‰§è¡Œ "),s("code",[t._v("setTimeout")]),t._v("ï¼Œä½†æ˜¯é‡Œé¢çš„ "),s("code",[t._v("setState")]),t._v(" æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥è¿˜æ²¡æ‰§è¡Œï¼Œç´§æ¥ç€ "),s("code",[t._v("isBatchingUpdates = false")]),t._v(" ã€‚å› æ­¤ä¹‹å "),s("code",[t._v("setState")]),t._v(" æ‰§è¡Œçš„æ—¶å€™ï¼Œ"),s("code",[t._v("isBatchingUpdates = false")]),t._v(" ï¼Œæ‰€ä»¥å¼€å§‹èµ°æµç¨‹å›¾çš„å³è¾¹äº†ã€‚")]),t._v(" "),s("p",[t._v("å…¶å® React æ‰€æœ‰å‡½æ•°éƒ½æ˜¯è¿™æ ·çš„é€»è¾‘ã€‚")]),t._v(" "),s("p",[t._v("è‡ªå®šä¹‰äº‹ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/0082zybply1gc9gzybiulj30lt0bjgqd.jpg",alt:"image-20200226075447475"}})]),t._v(" "),s("p",[t._v("æ€»ç»“ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("åŒæ­¥å¼‚æ­¥ä¸æ˜¯ç”± setState è‡ªå·±å†³å®šçš„")]),t._v(" "),s("li",[t._v("å°±æ˜¯çœ‹èƒ½å¦å‘½ä¸­ batchUpdate æœºåˆ¶")]),t._v(" "),s("li",[t._v("åˆ¤æ–­ "),s("code",[t._v("isBatchingUpdate")])])]),t._v(" "),s("p",[t._v("èƒ½å‘½ä¸­ batchUpdate æœºåˆ¶ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ç”Ÿå‘½å‘¨æœŸä»¥åŠå…¶è°ƒç”¨çš„å‡½æ•°")]),t._v(" "),s("li",[t._v("React ä¸­æ³¨å†Œçš„äº‹ä»¶ï¼ˆå’Œå®ƒè°ƒç”¨çš„å‡½æ•°ï¼‰")]),t._v(" "),s("li",[t._v("React å¯ä»¥â€œç®¡ç†â€çš„å…¥å£")])]),t._v(" "),s("p",[t._v("ä¸èƒ½å‘½ä¸­ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("setTimeoutï¼ŒsetIntervalï¼ˆå’Œå®ƒè°ƒç”¨çš„å‡½æ•°ï¼‰")]),t._v(" "),s("li",[t._v("è‡ªå®šä¹‰çš„ DOM äº‹ä»¶")]),t._v(" "),s("li",[t._v("React â€œç®¡ä¸åˆ°â€ çš„å…¥å£ï¼Œä¸æ˜¯ React é‚£å„¿æ³¨å†Œçš„")])]),t._v(" "),s("h3",{attrs:{id:"transction-æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transction-æœºåˆ¶","aria-hidden":"true"}},[t._v("#")]),t._v(" transction æœºåˆ¶")]),t._v(" "),s("p",[t._v("![image-20200226080322386](/Users/husiyuan/Library/Application Support/typora-user-images/image-20200226080322386.png)")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/0082zybply1gc9ha7qr8hj30jq0d7gpa.jpg",alt:"image-20200226080439053"}})]),t._v(" "),s("p",[t._v("å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸¤ä¸ª"),s("code",[t._v("wrapper")]),t._v("çš„"),s("code",[t._v("initialize")]),t._v("éƒ½æ²¡æœ‰åšä»€ä¹ˆäº‹æƒ…ï¼Œä½†æ˜¯åœ¨ callback æ‰§è¡Œå®Œä¹‹åï¼Œ"),s("code",[t._v("RESET_BATCHED_UPDATES")]),t._v(" çš„ä½œç”¨æ˜¯å°†"),s("code",[t._v("isBatchingUpdates")]),t._v("ç½®ä¸º"),s("code",[t._v("false")]),t._v(", "),s("code",[t._v("FLUSH_BATCHED_UPDATES")]),t._v(" çš„ä½œç”¨æ˜¯æ‰§è¡Œ"),s("code",[t._v("flushBatchedUpdates")]),t._v(",ç„¶åé‡Œé¢ä¼šå¾ªç¯æ‰€æœ‰"),s("code",[t._v("dirtyComponent")]),t._v(",è°ƒç”¨"),s("code",[t._v("updateComponent")]),t._v("æ¥æ‰§è¡Œæ‰€æœ‰çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œ"),s("code",[t._v("componentWillReceiveProps")]),t._v(", "),s("code",[t._v("shouldComponentUpdate")]),t._v(", "),s("code",[t._v("componentWillUpdate")]),t._v(", "),s("code",[t._v("render")]),t._v(", "),s("code",[t._v("componentDidUpdate")]),t._v(" æœ€åå®ç°ç»„ä»¶çš„æ›´æ–°ã€‚")]),t._v(" "),s("h2",{attrs:{id:"ç»„ä»¶æ¸²æŸ“å’Œæ›´æ–°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»„ä»¶æ¸²æŸ“å’Œæ›´æ–°","aria-hidden":"true"}},[t._v("#")]),t._v(" ç»„ä»¶æ¸²æŸ“å’Œæ›´æ–°")]),t._v(" "),s("h3",{attrs:{id:"ç»„ä»¶æ¸²æŸ“å’Œæ›´æ–°çš„è¿‡ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»„ä»¶æ¸²æŸ“å’Œæ›´æ–°çš„è¿‡ç¨‹","aria-hidden":"true"}},[t._v("#")]),t._v(" ç»„ä»¶æ¸²æŸ“å’Œæ›´æ–°çš„è¿‡ç¨‹")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("setState(newState)")]),t._v(" => dirtyComponents ï¼ˆå¯èƒ½æœ‰å­ç»„ä»¶ï¼‰")]),t._v(" "),s("li",[s("code",[t._v("render()")]),t._v(" ç”Ÿæˆ newVnode")]),t._v(" "),s("li",[s("code",[t._v("patch(vnode, newVnode)")]),t._v(" "),s("ol",[s("li",[t._v("reconciliation é˜¶æ®µï¼šæ‰§è¡Œ diff ç®—æ³•ï¼Œçº¯ JS è®¡ç®—")]),t._v(" "),s("li",[t._v("commit é˜¶æ®µï¼šå°† diff ç»“æœæ¸²æŸ“åˆ° DOM")])])])]),t._v(" "),s("h3",{attrs:{id:"ä¸ºä½•-patch-åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Ÿ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä½•-patch-åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Ÿ","aria-hidden":"true"}},[t._v("#")]),t._v(" ä¸ºä½• patch åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Ÿ")]),t._v(" "),s("ul",[s("li",[t._v("js æ˜¯å•çº¿ç¨‹çš„ï¼Œå’Œ DOM æ¸²æŸ“å…¬ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼ˆç±»æ¯”å›æµçš„è¿‡ç¨‹ï¼‰")]),t._v(" "),s("li",[t._v("ç»„ä»¶å¤æ‚çš„æ—¶å€™ï¼Œç»„ä»¶æ›´æ–°è®¡ç®—å’Œæ¸²æŸ“éƒ½å‹åŠ›å¾ˆå¤§")]),t._v(" "),s("li",[t._v("åŒæ—¶æœ‰ DOM æ“ä½œéœ€æ±‚çš„æ—¶å€™ï¼ˆåŠ¨ç”»ã€é¼ æ ‡æ‹–æ‹½ï¼‰ï¼Œä¼šå¡é¡¿ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ "),s("code",[t._v("fiber")])])]),t._v(" "),s("h3",{attrs:{id:"ä½•ä¸º-fiber"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½•ä¸º-fiber","aria-hidden":"true"}},[t._v("#")]),t._v(" ä½•ä¸º fiber")]),t._v(" "),s("p",[t._v("å•çº¿ç¨‹è°ƒåº¦ç®—æ³•")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.im/post/5ab7b3a2f265da2378403e57",target:"_blank",rel:"noopener noreferrer"}},[t._v("fiber ä»‹ç»"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("react åœ¨è¿›è¡Œç»„ä»¶æ¸²æŸ“æ—¶ï¼Œä» setState å¼€å§‹åˆ°æ¸²æŸ“å®Œæˆæ•´ä¸ªè¿‡ç¨‹æ˜¯åŒæ­¥çš„ï¼ˆâ€œä¸€æ°”å‘µæˆâ€ï¼‰ã€‚å¦‚æœéœ€è¦æ¸²æŸ“çš„ç»„ä»¶æ¯”è¾ƒåºå¤§ï¼Œjs æ‰§è¡Œä¼šå æ®ä¸»çº¿ç¨‹æ—¶é—´è¾ƒé•¿ï¼Œä¼šå¯¼è‡´é¡µé¢å“åº”åº¦å˜å·®ï¼Œä½¿å¾— react åœ¨åŠ¨ç”»ã€æ‰‹åŠ¿ç­‰åº”ç”¨ä¸­æ•ˆæœæ¯”è¾ƒå·®ã€‚")]),t._v(" "),s("p",[t._v("ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œreact å›¢é˜Ÿç»è¿‡ä¸¤å¹´çš„å·¥ä½œï¼Œé‡å†™äº† react ä¸­æ ¸å¿ƒç®—æ³•â€”â€”"),s("a",{attrs:{href:"https://reactjs.org/docs/reconciliation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("reconciliation"),s("OutboundLink")],1),t._v("ã€‚å¹¶åœ¨ v16 ç‰ˆæœ¬ä¸­å‘å¸ƒäº†è¿™ä¸ªæ–°çš„ç‰¹æ€§ã€‚ä¸ºäº†åŒºåˆ«ä¹‹å‰å’Œä¹‹åçš„ reconcilerï¼Œé€šå¸¸å°†ä¹‹å‰çš„ reconciler ç§°ä¸º stack reconcilerï¼Œé‡å†™åçš„ç§°ä¸º fiber reconcilerï¼Œç®€ç§°ä¸º Fiberã€‚")]),t._v(" "),s("ul",[s("li",[t._v("å°† reconciliationï¼ˆé‡å†™äº†ï¼‰ é˜¶æ®µè¿›è¡Œæ‹†åˆ†ï¼ˆcommit æ— æ³•æ‹†åˆ†ï¼Œä¸€æ¬¡æ‰§è¡Œå®Œï¼‰")]),t._v(" "),s("li",[t._v("DOM éœ€è¦æ¸²æŸ“æ—¶å€™æš‚åœï¼Œç©ºé—²æ—¶æ¢å¤")]),t._v(" "),s("li",[t._v("ä½•æ—¶æš‚åœä½•æ—¶æ¢å¤å‘¢ï¼Ÿ "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestIdleCallback",target:"_blank",rel:"noopener noreferrer"}},[t._v("window.requestIdleCallback"),s("OutboundLink")],1),t._v(" (Edge,IE,Safari ä¸æ”¯æŒï¼Œç”¨ polyfill)")])]),t._v(" "),s("h2",{attrs:{id:"æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“","aria-hidden":"true"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),s("ul",[s("li",[t._v("å‡½æ•°å¼ç¼–ç¨‹ï¼šçº¯å‡½æ•°ï¼Œä¸å¯å˜å€¼")]),t._v(" "),s("li",[t._v("VDOM å’Œ diff")]),t._v(" "),s("li",[t._v("JSX çš„æœ¬è´¨")]),t._v(" "),s("li",[t._v("åˆæˆäº‹ä»¶")]),t._v(" "),s("li",[t._v("setState å’Œ batchUpdate")]),t._v(" "),s("li",[t._v("ç»„ä»¶æ¸²æŸ“å’Œæ›´æ–°çš„è¿‡ç¨‹")]),t._v(" "),s("li",[t._v("fiber æ¶æ„")])])])},[],!1,null,null,null);a.default=n.exports}}]);