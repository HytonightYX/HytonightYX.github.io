(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{255:function(t,a,r){"use strict";r.r(a);var e=r(4),s=Object(e.a)({},function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"如何在数据库中存储密码更安全？"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#如何在数据库中存储密码更安全？","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何在数据库中存储密码更安全？")]),t._v(" "),r("p",[r("code",[t._v("2020-4-9")])]),t._v(" "),r("blockquote",[r("p",[t._v("极客时间版权所有: https://time.geekbang.org/dailylesson/detail/100044031")])]),t._v(" "),r("h2",{attrs:{id:"密码有哪些泄漏的途径和场景？"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#密码有哪些泄漏的途径和场景？","aria-hidden":"true"}},[t._v("#")]),t._v(" 密码有哪些泄漏的途径和场景？")]),t._v(" "),r("p",[t._v("密码数据流的角度来看")]),t._v(" "),r("h3",{attrs:{id:"输入密码"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#输入密码","aria-hidden":"true"}},[t._v("#")]),t._v(" 输入密码")]),t._v(" "),r("ul",[r("li",[t._v("直接猜测")]),t._v(" "),r("li",[r("strong",[t._v("暴力破解")]),t._v("（高级猜测）")])]),t._v(" "),r("h3",{attrs:{id:"网络传输"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#网络传输","aria-hidden":"true"}},[t._v("#")]),t._v(" 网络传输")]),t._v(" "),r("ul",[r("li",[t._v("中间人攻击\n"),r("ul",[r("li",[r("strong",[t._v("传输截取")]),t._v("（钓鱼网站）")])])])]),t._v(" "),r("h3",{attrs:{id:"服务端"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#服务端","aria-hidden":"true"}},[t._v("#")]),t._v(" 服务端")]),t._v(" "),r("ul",[r("li",[t._v("系统服务漏洞\n"),r("ul",[r("li",[r("strong",[t._v("脱库")]),t._v("：黑客直接盗取整个数据库")])])])]),t._v(" "),r("p",[t._v("脱库了之后，即时有密文存储也可能不安全，因为黑客有了修改数据库的权限，直接将你的密码密文替换掉，他就能登录你的账户了。")]),t._v(" "),r("p",[t._v("所以，简单的密码加密存储不能保证足够的安全。")]),t._v(" "),r("h2",{attrs:{id:"如何防止密码被破解？"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#如何防止密码被破解？","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何防止密码被破解？")]),t._v(" "),r("ul",[r("li",[t._v("严禁明文传输密码（客户端加密 + HTTPS/TLS 双重加密）")]),t._v(" "),r("li",[t._v("数据库中严禁使用明文存储")]),t._v(" "),r("li",[t._v("采用不可逆加密（无需解密）\n"),r("ul",[r("li",[t._v("用户输入密码，进行相同的算法进行加密，只需比较加密后的密文就可以了")])])]),t._v(" "),r("li",[t._v("密码尽可能复杂，尽可能定期修改密码")]),t._v(" "),r("li",[t._v("安全机制，防止暴力破解（虽然密码破解目前很难，但是攻击者不停尝试也会给服务器带来很大压力）\n"),r("ul",[r("li",[t._v("限定错误次数，添加验证码或者冻结账号")])])]),t._v(" "),r("li",[t._v("采用业内已知的比较安全的加密算法")])]),t._v(" "),r("h2",{attrs:{id:"密码在数据库中如何存储？"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#密码在数据库中如何存储？","aria-hidden":"true"}},[t._v("#")]),t._v(" 密码在数据库中如何存储？")]),t._v(" "),r("h3",{attrs:{id:"密码加盐方案"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#密码加盐方案","aria-hidden":"true"}},[t._v("#")]),t._v(" 密码加盐方案")]),t._v(" "),r("p",[t._v("盐：没有规律的随机字符串，使得存储的密码更加复杂，从而更难破解。")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("密文 = f(明文密码 + 盐)\n")])])]),r("p",[t._v("盐越长越复杂，密文越安全。")]),t._v(" "),r("p",[t._v("盐是固定的，所以需要持久化保存，我们在数据库中要多一个字段来保存盐。")]),t._v(" "),r("p",[t._v("加盐解决了密码复杂性的问题。")]),t._v(" "),r("h3",{attrs:{id:"密码加盐加账号信息方案"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#密码加盐加账号信息方案","aria-hidden":"true"}},[t._v("#")]),t._v(" 密码加盐加账号信息方案")]),t._v(" "),r("p",[t._v("仅仅加盐还是没解决一个问题，就是脱库后黑客将密码+盐都替换为另一套密码+盐。")]),t._v(" "),r("p",[r("img",{attrs:{src:"http://qn-noter.yunxi.site/imagehost/j2fch.png-style1",alt:"image-20200409105607834"}})]),t._v(" "),r("p",[t._v("问题就在于，"),r("strong",[t._v("加密的数据没有和账号关联")]),t._v("，如果密码和账号是关联的，就可以解决这个问题。")]),t._v(" "),r("p",[t._v("所以我们继续加上账号唯一相关的字端，比如账号 ID 的若干位、手机号等等。")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("密文 = f(明文密码 + 盐 + 账号相关)\n")])])]),r("p",[r("img",{attrs:{src:"http://qn-noter.yunxi.site/imagehost/vkgvo.png",alt:"image-20200409105845858"}})]),t._v(" "),r("h2",{attrs:{id:"总结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),r("p",[r("img",{attrs:{src:"http://qn-noter.yunxi.site/imagehost/j7fkp.png",alt:"image-20200409105400647"}})])])},[],!1,null,null,null);a.default=s.exports}}]);